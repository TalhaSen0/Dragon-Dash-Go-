const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-deRGXZsy.js","assets/index-B_4-ozG1.js","assets/index-DihluWxr.js"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}})();const L="modulepreload",V=function(p){return"/"+p},z={},E=function(t,e,a){let i=Promise.resolve();if(e&&e.length>0){let c=function(h){return Promise.all(h.map(f=>Promise.resolve(f).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),n=s?.nonce||s?.getAttribute("nonce");i=c(e.map(h=>{if(h=V(h),h in z)return;z[h]=!0;const f=h.endsWith(".css"),d=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${d}`))return;const l=document.createElement("link");if(l.rel=f?"stylesheet":L,f||(l.as="script"),l.crossOrigin="",l.href=h,n&&l.setAttribute("nonce",n),document.head.appendChild(l),f)return new Promise((o,g)=>{l.addEventListener("load",o),l.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${h}`)))})}))}function r(s){const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=s,window.dispatchEvent(n),!n.defaultPrevented)throw s}return i.then(s=>{for(const n of s||[])n.status==="rejected"&&r(n.reason);return t().catch(r)})};let O={sfxOn:!0,sfxVol:.5};const T=p=>{O.sfxOn=p},D=p=>{O.sfxVol=Math.max(0,Math.min(1,p))},F=()=>O.sfxOn,k=()=>O.sfxVol;function x(p,t,e={}){if(O.sfxOn){if(!p.cache.audio.exists(t)){console.warn(`[SFX] '${t}' not in cache`);return}p.sound.play(t,{volume:O.sfxVol,...e})}}class B extends Phaser.Scene{constructor(){super("Boot")}preload(){this.game.musicManager.scene=this,this.game.musicManager.preloadMusic(),this.load.setPath("assets"),this.load.audio("menuFX","menueffect.mp3"),this.load.audio("wing","wingeffect.mp3"),this.load.audio("death","deatheffect.mp3"),this.load.on("loaderror",(t,e)=>console.warn("[Boot] failed to load:",e))}create(){const t=this.sound,e=t.play;t.play=function(a,i={}){const r=String(a).startsWith("dd");if(!r&&!F())return null;if(!r){const s=k();i={...i,volume:(i.volume??1)*s}}return e.call(this,a,i)},this.game.musicManager.start(),this.scene.start("Menu")}}class X extends Phaser.Scene{constructor(){super("Menu")}preload(){this.load.image("scene_bg","assets/mainmenu.png"),this.load.image("title","assets/yazi.png"),this.load.image("btn_bg","assets/buttonbackground.png"),this.load.image("icon-play","assets/icon-play.png"),this.load.image("icon-levels","assets/icon-levels.png"),this.load.image("icon-records","assets/icon-records.png"),this.load.image("icon-settings","assets/icon-settings.png"),this.load.image("icon-about","assets/icon-about.png")}_safeInteractive(t,e={}){const a=this.game.config.resolution>1;return t.setInteractive({useHandCursor:!0,pixelPerfect:!a,alphaTolerance:1,...e})}create(){const t=this.scale.width,e=this.scale.height;this.add.image(t/2,e/2,"scene_bg").setDisplaySize(t,e).setOrigin(.5);const a=this.add.image(t/2,e*.05,"title").setOrigin(.5,0);a.setScale(t*.8/a.width);const i=[{label:"Free Play",icon:"icon-play",action:()=>this.scene.start("Start",{freePlay:!0})},{label:"Levels",icon:"icon-levels",action:()=>this.scene.start("Levels")},{label:"Records",icon:"icon-records",action:()=>this.scene.start("Records")},{label:"Settings",icon:"icon-settings",action:()=>this.scene.start("Settings")},{label:"About",icon:"icon-about",action:()=>this.scene.start("Credits")}],r=t*.8,s=160,n=-70,c=e*.05,h=i.length*s+(i.length-1)*n;let f=e-h-c+s/2+75;i.forEach(({label:d,icon:l,action:o})=>{const g=this.add.container(t/2,f),u=this.add.image(0,0,"btn_bg").setDisplaySize(r,s);this._safeInteractive(u),u.on("pointerover",()=>{u.setAlpha(.8)}),u.on("pointerout",()=>{u.setAlpha(1)}),u.on("pointerup",()=>{console.log(`Button clicked: ${d}`),x(this,"menuFX"),o()});const m=this.add.image(-r/2+20,0,l).setOrigin(0,.5).setDisplaySize(40,40),y=this.add.text(-r/2+20+40+12,0,d,{fontFamily:"Arial, sans-serif",fontSize:"32px",fill:"#ffffff"}).setOrigin(0,.5);g.add([u,m,y]),f+=s+n})}_getPlatform(){if(window.Capacitor)return window.Capacitor.getPlatform();const t=navigator.userAgent||navigator.vendor||window.opera;return/iPad|iPhone|iPod/.test(t)&&!window.MSStream?"ios":/android/i.test(t)?"android":"web"}}class G extends Phaser.Scene{constructor(){super("Start")}init(t){this.freePlay=!!t.freePlay,this.currentLevel=this.freePlay?1:t.level||1,this.hardMode=!!t.hardMode}preload(){this.load.image("background","assets/background.png"),this.load.image("bg2","assets/bg2.png"),this.load.image("enust","assets/enust.png"),this.load.image("enalt","assets/enalt.png"),this.load.image("character","assets/character.png"),this.load.image("characterFlap","assets/characteranim.png"),this.load.image("tube","assets/tube.png"),this.load.audio("wing","assets/wingeffect.mp3"),this.load.audio("death","assets/deatheffect.mp3")}create(){const t=this.scale.width,e=this.scale.height;this.bgGravityY=-19,this.bgJumpBoost=9,this.bg2GravityY=-205,this.bg2JumpBoost=95,this.pipeGravityY=-1e3,this.pipeJumpBoost=480,this.score=0,this.recordSaved=!1,this.gameOver=!1,this.isFrozen=!0,this.deathSequenceStarted=!1,this.postDeathFreeze=!1,this.levelComplete=!1,this.leaderPipe=null,this.freePlay||(this.targetScore=this.currentLevel*10),this.flashOverlay=this.add.rectangle(t/2,e/2,t,e,16711680).setAlpha(0).setDepth(9999),this._createBackgrounds(t,e),this._createPlayer(t,e),this._createUI(t),this.pipes=this.physics.add.group(),this.pendingInitialPipe=!0,this.pipeTimer=this.time.addEvent({delay:2e3,loop:!0,paused:!0,callback:()=>this.spawnPipe()}),this.input.on("pointerdown",()=>!this.deathSequenceStarted&&this.jump()),this.input.keyboard.on("keydown-SPACE",()=>!this.deathSequenceStarted&&this.jump()),this.physics.add.overlap(this.player,this.pipes,()=>this.hitObstacle())}_createBackgrounds(t,e){this.enust=this.add.image(t/2,0,"enust").setOrigin(.5,1).setDepth(-9999).setDisplaySize(t*2,e),this.enust.gravityVelocity=0,this.enalt=this.add.image(t/2,e,"enalt").setOrigin(.5,0).setDepth(-6750).setDisplaySize(t*2,e),this.enalt.gravityVelocity=0,this.bgGroup=this.add.group();for(let a=0;a<4;a++){const i=this.add.image(a*t,e/2,"background").setOrigin(.5).setDisplaySize(t,e).setDepth(-7e3);a%2&&i.setFlipX(!0),i.gravityVelocity=0,this.bgGroup.add(i)}this.bg2SegWidth=t,this.bg2Group=this.add.group();for(let a=0;a<6;a++){const i=this.add.image(a*this.bg2SegWidth,e,"bg2").setOrigin(.5,1).setDisplaySize(this.bg2SegWidth,450);a%2&&i.setFlipX(!0),i.gravityVelocity=0,this.bg2Group.add(i)}}_createPlayer(t,e){this.player=this.physics.add.image(t/2,e/2,"character").setScale(.1).setDepth(10).setImmovable(!0),this.player.body.allowGravity=!1,this.player.body.setSize(745,250).setOffset(350,400)}_createUI(t){const e=this.freePlay?"Score: 0":`Score: 0 | Target: ${this.targetScore}`;this.scoreText=this.add.text(t/2,50,e,{fontSize:"30px",fill:"#ffffff"}).setOrigin(.5).setDepth(1e3)}spawnPipe(){const t=this.hardMode?200:340,e=this.scale.width+100,a=Phaser.Math.Between(100,this.scale.height-100-t);this._createPipe(e,a+t,!1);const i=this._createPipe(e,a,!0);this.leaderPipe||(this.leaderPipe=i)}_createPipe(t,e,a){const i=this.pipes.create(t,e,"tube").setOrigin(.5,a?1:0);return i.setFlipY(a),i.displayHeight=this.scale.height*2,i.displayWidth*=.4,i.body.allowGravity=!1,i.gravityVelocity=this.leaderPipe?this.leaderPipe.gravityVelocity:0,i.setVelocityX(this.gameOver?0:-200),i.scored=!1,i}jump(){if(this.gameOver&&!this.deathSequenceStarted)return;x(this,"wing",{volume:1.3}),this.player.setTexture("characterFlap"),this.tweens.add({targets:this.player,angle:8,duration:80,yoyo:!0,ease:"Linear",onComplete:()=>{this.player.setTexture("character"),this.player.setAngle(0)}}),this.isFrozen&&(console.log("Oyun baÅŸlÄ±yor!"),this.isFrozen=!1,this.pendingInitialPipe&&(this.spawnPipe(),this.pendingInitialPipe=!1,this.pipeTimer.paused=!1));const t=this.deathSequenceStarted?1.5:1;this.leaderPipe?(console.log("LeaderPipe pozisyonu:",this.leaderPipe.x,"Player pozisyonu:",this.player.x),this.leaderPipe.gravityVelocity=this.pipeJumpBoost*t):console.log("UYARI: leaderPipe null!"),this.bgGroup.getChildren().forEach(e=>e.gravityVelocity=this.bgJumpBoost*t),this.bg2Group.getChildren().forEach(e=>e.gravityVelocity=this.bg2JumpBoost*t),this.enust.gravityVelocity=this.bgJumpBoost*t,this.enalt.gravityVelocity=this.bg2JumpBoost*t}update(t,e){if(this.isFrozen)return;const a=e/1e3,i=this.deathSequenceStarted?1.5:1,r=(s,n)=>{s&&(s.gravityVelocity=(s.gravityVelocity||0)+n*i*a,s.y+=s.gravityVelocity*a)};if(r(this.enust,this.bgGravityY),r(this.enalt,this.bg2GravityY),this.bgGroup.getChildren().forEach(s=>{this.postDeathFreeze||(s.x-=.8*(e/16.666)),r(s,this.bgGravityY),s.x<=-this.scale.width/2&&(s.x+=this.scale.width*4)}),this.bg2Group.getChildren().forEach(s=>{this.postDeathFreeze||(s.x-=1.6*(e/16.666)),r(s,this.bg2GravityY),s.x<=-this.bg2SegWidth/2&&(s.x+=this.bg2SegWidth*6)}),this.leaderPipe){r(this.leaderPipe,this.pipeGravityY);const s=this.leaderPipe.gravityVelocity;this.pipes.getChildren().forEach(n=>{n!==this.leaderPipe&&(n.gravityVelocity=s,n.y+=s*a)})}if(this.leaderPipe&&!this.leaderPipe.scored&&this.leaderPipe.x<this.player.x){console.log("Skor artÄ±yor!",this.score+1),this.leaderPipe.scored=!0,this.score+=1,this._updateScoreText(Math.floor(this.score));const n=this.pipes.getChildren().filter(c=>c.flipY).filter(c=>!c.scored).sort((c,h)=>c.x-h.x)[0];n?(this.leaderPipe=n,console.log("Yeni leaderPipe belirlendi:",n.x)):(console.log("HiÃ§ scorelanmamÄ±ÅŸ boru yok!"),this.leaderPipe=null)}this.pipes.getChildren().forEach(s=>{if(s.x+s.displayWidth<0){if(s===this.leaderPipe){console.log("LeaderPipe temizlendi, yenisi aranÄ±yor...");const n=this.pipes.getChildren().filter(c=>c!==s&&c.flipY&&!c.scored).sort((c,h)=>c.x-h.x);this.leaderPipe=n[0]||null}s.destroy()}})}_updateScoreText(t){this.freePlay?this.scoreText.setText(`Score: ${t}`):(this.scoreText.setText(`Score: ${t} | Target: ${this.targetScore}`),!this.levelComplete&&t>=this.targetScore&&(this.levelComplete=!0,this.onLevelComplete()))}onLevelComplete(){if(this.recordSaved)return;this.recordSaved=!0;const t=this.scale.width,e=this.scale.height,a=this.currentLevel+1;this.add.text(t/2,e/2,`Level ${this.currentLevel} Complete!
Next: Level ${a}`,{fontSize:"32px",fill:"#ffff00",backgroundColor:"#000000aa",align:"center",padding:{x:12,y:6}}).setOrigin(.5).setDepth(1e4);const i=this.hardMode?"highestHardLevel":"highestLevel",r=parseInt(localStorage.getItem(i)||"1",10);a>r&&localStorage.setItem(i,a),this._saveRecord(Math.floor(this.score)),this.time.delayedCall(1500,()=>this.scene.start("Start",{level:a,hardMode:this.hardMode}))}hitObstacle(){this.gameOver||(this.gameOver=!0,x(this,"death",{volume:1.5}),!this.recordSaved&&!this.levelComplete&&(this.recordSaved=!0,this._saveRecord(Math.floor(this.score))),this.isFrozen=!0,this.deathSequenceStarted=!0,this.pipeTimer.paused=!0,this.pipes.getChildren().forEach(t=>t.setVelocityX(0)),this.tweens.add({targets:this.flashOverlay,alpha:{from:0,to:1},duration:100,yoyo:!0,hold:100}),this.time.delayedCall(300,()=>{this.postDeathFreeze=!0,this.jump(),this.isFrozen=!1}),this.time.delayedCall(1250,()=>{const t=this.hardMode?"HardMode":this.freePlay?"Menu":"Levels";this.scene.start(t)}))}_saveRecord(t){const e=JSON.parse(localStorage.getItem("records")||"[]");e.push({score:t,level:this.currentLevel,mode:this.hardMode?"hard":this.freePlay?"freeplay":"levels",timestamp:Date.now()}),localStorage.setItem("records",JSON.stringify(e));const a=parseInt(localStorage.getItem("bestScore")||"0",10);t>a&&localStorage.setItem("bestScore",t)}}const R="highestLevel";function Y(){return parseInt(localStorage.getItem(R)||"1",10)}class $ extends Phaser.Scene{constructor(){super("Levels")}preload(){this.load.image("level_bg","assets/levelbackground.png")}create(){const t=this.scale.width,e=this.scale.height;this.add.image(t/2,e/2,"level_bg").setDisplaySize(t,e).setOrigin(.5),this.add.text(t/2,40,"Select a Level",{fontFamily:"Arial, sans-serif",fontSize:"36px",fill:"#ffffff"}).setOrigin(.5);const a=this.add.text(t/2,90,"Hard Mode",{fontFamily:"Arial, sans-serif",fontSize:"24px",fill:"#ff4444",backgroundColor:"#00000077",padding:{x:12,y:6}}).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointerover",()=>a.setStyle({fill:"#ff8888"})).on("pointerout",()=>a.setStyle({fill:"#ff4444"})).on("pointerup",()=>{x(this,"menuFX"),this.time.delayedCall(100,()=>this.scene.start("HardMode"))}),i=Y(),r=t*.25,s=t*.75,n=t*.5,c=[e*.85,e*.7,e*.55,e*.4,e*.25],h=40,f={1:{x:30,y:-41},2:{x:-45,y:-68},3:{x:45,y:-48},4:{x:-45,y:-79},5:{x:30,y:-33},6:{x:-35,y:-63},7:{x:0,y:12},8:{x:-12,y:-19},9:{x:-30,y:77},10:{x:10,y:52}},d=55,l=o=>()=>{x(this,"menuFX"),this.time.delayedCall(100,()=>this.scene.start("Start",{level:o}))};for(let o=1;o<=10;o++){const g=o-1,u=Math.floor(g/2),m=o%2===1;let y=(m?s:r)+(n-(m?s:r))*(g/9)*.2,S=c[u]-h;const P=f[o]||{x:0,y:0};y+=P.x,S+=P.y;const b=o<=i,C=b?"#ffffff":"#777777",M=this.add.circle(y,S,d,0,0).setInteractive({useHandCursor:!0});b&&M.on("pointerup",l(o));const I=this.add.text(y,S,`${o}`,{fontFamily:"Arial, sans-serif",fontSize:"40px",color:C,fontStyle:"bold"}).setOrigin(.5);b&&M.on("pointerover",()=>I.setStyle({color:"#ffff00"})).on("pointerout",()=>I.setStyle({color:"#ffffff"})),this.add.text(y,S+32,`Reach ${o*10} points`,{fontFamily:"Arial, sans-serif",fontSize:"18px",fill:b?"#00ff00":"#ffffff"}).setOrigin(.5)}this.add.text(t/2,e-50,"â—€ Back",{fontFamily:"Arial, sans-serif",fontSize:"28px",fill:"#ffffff",backgroundColor:"#00000077",padding:{x:12,y:6}}).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointerup",()=>{x(this,"menuFX"),this.scene.start("Menu")})}}const A="highestHardLevel",H=()=>parseInt(localStorage.getItem(A)||"1",10),N=p=>localStorage.setItem(A,Math.max(H(),p));class q extends Phaser.Scene{constructor(){super("HardMode")}preload(){this.load.image("level_bg","assets/levelbackground.png")}create(){const t=this.scale.width,e=this.scale.height;this.add.image(t/2,e/2,"level_bg").setDisplaySize(t,e).setOrigin(.5),this.add.text(t/2,40,"Hard Mode",{fontFamily:"Arial, sans-serif",fontSize:"36px",fill:"#ff4444"}).setOrigin(.5,0),this.add.text(t/2,90,"(Obstacle Gap Reduced)",{fontFamily:"Arial, sans-serif",fontSize:"20px",fill:"#ffffff",align:"center",wordWrap:{width:t*.8}}).setOrigin(.5,0),this.add.text(t/2,140,"Easy Mode",{fontFamily:"Arial, sans-serif",fontSize:"24px",fill:"#44ff44",backgroundColor:"#00000077",padding:{x:12,y:6}}).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointerup",()=>{x(this,"menuFX"),this.scene.start("Levels")});const a=H(),i=t*.25,r=t*.75,s=t*.5,n=[e*.85,e*.7,e*.55,e*.4,e*.25],c=40,h={1:{x:30,y:-41},2:{x:-45,y:-68},3:{x:45,y:-48},4:{x:-45,y:-79},5:{x:30,y:-33},6:{x:-35,y:-63},7:{x:0,y:12},8:{x:-12,y:-19},9:{x:-30,y:77},10:{x:10,y:52}},f=55,d=l=>()=>{x(this,"menuFX"),this.time.delayedCall(100,()=>{this.scene.start("Start",{level:l,hardMode:!0})})};for(let l=1;l<=10;l++){const o=l-1,g=Math.floor(o/2);let u=(l%2?r:i)+(s-(l%2?r:i))*(o/9)*.2,m=n[g]-c;const y=h[l]||{x:0,y:0};u+=y.x,m+=y.y;const S=l<=a,P=S?"#ffffff":"#777777",b=this.add.circle(u,m,f,0,0).setInteractive({useHandCursor:!0});S&&b.on("pointerup",d(l));const C=this.add.text(u,m,`${l}`,{fontFamily:"Arial, sans-serif",fontSize:"40px",color:P,fontStyle:"bold"}).setOrigin(.5);S&&b.on("pointerover",()=>C.setStyle({color:"#ffff00"})).on("pointerout",()=>C.setStyle({color:"#ffffff"})),this.add.text(u,m+32,`Reach ${l*10} points`,{fontFamily:"Arial, sans-serif",fontSize:"18px",fill:S?"#ff8800":"#ffffff"}).setOrigin(.5)}this.add.text(t/2,e-50,"â—€ Back",{fontFamily:"Arial, sans-serif",fontSize:"28px",fill:"#ffffff",backgroundColor:"#00000077",padding:{x:12,y:6}}).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointerup",()=>{x(this,"menuFX"),this.scene.start("Menu")})}static unlockNext(t){N(t+1)}}class J extends Phaser.Scene{constructor(){super("Records")}preload(){this.load.image("records_bg","assets/recordsbackground.png")}create(){const t=this.scale.width,e=this.scale.height;this.add.image(t/2,e/2,"records_bg").setDisplaySize(t,e).setOrigin(.5),this.add.text(t/2,40,"Records",{fontSize:"40px",fill:"#ffffff"}).setOrigin(.5);const a=this.add.text(t/2,e-60,"â—€ Back",{fontSize:"32px",fill:"#ffffff",backgroundColor:"#00000077",padding:{x:12,y:6}}).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointerover",()=>a.setStyle({fill:"#ffff00"})).on("pointerout",()=>a.setStyle({fill:"#ffffff"})).on("pointerup",(l,o,g,u)=>{u.stopPropagation(),x(this,"menuFX"),this.time.delayedCall(100,()=>this.scene.start("Menu"))});let i=JSON.parse(localStorage.getItem("records")||"[]");if(!i.length){this.add.text(t/2,e/2,"No records yet!",{fontSize:"28px",fill:"#ffffff"}).setOrigin(.5);return}i=i.sort((l,o)=>(l.timestamp||0)-(o.timestamp||0)),i=i.map((l,o)=>({...l,attempt:o+1}));const r=[...i].sort((l,o)=>o.score-l.score).slice(0,3),s=this.add.container(0,0);r.forEach((l,o)=>{const g=100+o*50;s.add(this.add.text(t/2,g,`  #${o+1}   score ${l.score}   (${l.attempt}. attempt)`,{fontSize:"28px",fill:"#ffff00"}).setOrigin(.5))});const n=[...i].sort((l,o)=>l.attempt-o.attempt);let c=100+r.length*50+30;n.forEach((l,o)=>{const g=c+o*40;s.add(this.add.text(t/2,g,`  ${l.attempt}. attempt   â†’   score ${l.score}`,{fontSize:"24px",fill:"#ffffff"}).setOrigin(.5))});const h=e-120,f=this.add.zone(t/2,40+h/2,t,h).setInteractive({draggable:!0}),d=Math.max(c+n.length*40,h);f.on("dragstart",(l,o,g)=>{this._dragStartY=g,this._startY=s.y}),f.on("drag",(l,o,g)=>{const u=g-this._dragStartY;s.y=Phaser.Math.Clamp(this._startY+u,h-d-20,0)})}}let w={quality:localStorage.getItem("quality")||"high",musicOn:localStorage.getItem("musicOn")!=="false",musicVol:parseFloat(localStorage.getItem("musicVol"))||.5};const W=p=>w.quality=p,Q=()=>w.quality,U=p=>w.musicOn=!!p,j=()=>w.musicOn,K=p=>w.musicVol=Math.max(0,Math.min(1,p)),Z=()=>w.musicVol;class tt extends Phaser.Scene{constructor(){super("Settings")}preload(){this.load.image("settings_bg","assets/settings-background.png"),this.load.image("panel_bg","assets/buttonbackground.png"),this.load.image("toggle","assets/onofftool.png"),this.load.image("toggleFlip","assets/onofftoolflip.png"),this.load.image("sliderTrack","assets/slidertool.png"),this.load.image("sliderThumb","assets/sliderpointtool.png"),this.load.image("musicIcon","assets/musicicon.png"),this.load.image("sfxIcon","assets/sfxicon.png"),this.load.image("qualityIcon","assets/qualityicon.png")}_txt(t,e,a,i=22,r="#ffffff"){return this.add.text(t,e,a,{fontFamily:"Arial, sans-serif",fontSize:`${i}px`,fill:r})}_fitToggleSize(t,e=50,a=1.35){const i=this.textures.get(t.texture.key).getSourceImage(),r=e*(t.texture.key==="toggleFlip"?a:1);t.setDisplaySize(r,r*(i.height/i.width))}_makeScrollable(t){this.input.on("pointerdown",e=>{this.dragging=!0,this.startY=e.y,this.origY=this.content.y}).on("pointermove",e=>{if(!this.dragging)return;const a=e.y-this.startY,i=Math.min(0,t-this.contentHeight-60);this.content.y=Phaser.Math.Clamp(this.origY+a,i,0)}).on("pointerup",()=>this.dragging=!1)}create(){const t=this.scale.width,e=this.scale.height;this.add.image(t/2,e/2,"settings_bg").setDisplaySize(t,e).setOrigin(.5),this.content=this.add.container(0,0),this._makeScrollable(e);const a=this._txt(t/2,e-40,"â—€ Back",36).setOrigin(.5).setDepth(999).setStyle({backgroundColor:"#00000077",padding:{x:12,y:6}}).setInteractive({useHandCursor:!0}).on("pointerover",()=>a.setStyle({fill:"#ffff00"})).on("pointerout",()=>a.setStyle({fill:"#ffffff"})).on("pointerup",l=>{l.event.stopPropagation(),x(this,"menuFX"),this.time.delayedCall(100,()=>this.scene.start("Menu"))}),i=t*.9,r=100,s=100,n=100,c=10,f=r+s+n+c*3+30*2;let d=e*.2+(e*.5-f)/2;this.content.add(this._txt(t/2,70,"Settings",36).setOrigin(.5,0)),d=this._qualitySection(t,i,d,r,c),d=this._musicSection(t,i,d,s,c),d=this._sfxSection(t,i,d,n,c),this.contentHeight=d+n+20}_qualitySection(t,e,a,i,r){const s=this._txt(t/2,a,"Graphics Quality").setOrigin(.5,0);this.content.add(s),this.content.add(this.add.image(s.x-s.width/2-30,s.y+s.height/2,"qualityIcon").setOrigin(.5).setDisplaySize(24,24)),a+=r,this.content.add(this.add.image(t/2,a+i/2,"panel_bg").setDisplaySize(e,i)),this.currentQuality=Q();const n=["low","medium","high"];return n.forEach((c,h,f)=>{const d=e/(f.length+1),l=t/2-e/2+d*(h+1),o=a+i/2,g=this._txt(l,o,c[0].toUpperCase()+c.slice(1),20,this.currentQuality===c?"#ffff00":"#ffffff").setOrigin(.5),u=this.add.circle(l,o,50,16777215,0).setInteractive({useHandCursor:!0}).on("pointerup",()=>this._setQuality(c,n)).on("pointerover",()=>g.setStyle({fill:"#ffff00"})).on("pointerout",()=>{this.currentQuality!==c&&g.setStyle({fill:"#ffffff"})});this.content.add([u,g])}),a+i+r*3}_setQuality(t,e){t!==this.currentQuality&&(this.currentQuality=t,this.content.list.forEach(a=>{e.includes(a.text?.toLowerCase?.())&&a.setStyle({fill:a.text.toLowerCase()===t?"#ffff00":"#ffffff"})}),W(t),localStorage.setItem("quality",t),x(this,"menuFX"),this.time.delayedCall(100,()=>window.location.reload()))}_musicSection(t,e,a,i,r){const s=this._txt(t/2,a,"Music").setOrigin(.5,0);a+=r,this.content.add(s),this.content.add(this.add.image(t/2,a+i/2,"panel_bg").setDisplaySize(e,i)),this.content.add(this.add.image(s.x-s.width/2-30,s.y+s.height/2,"musicIcon").setOrigin(.5).setDisplaySize(24,24)),this.musicOn=j();const n=this.add.image(s.x+s.width/2+30,s.y+s.height/2,this.musicOn?"toggle":"toggleFlip").setOrigin(.5);this._fitToggleSize(n);const c=this.add.circle(n.x,n.y,50,16777215,0).setInteractive({useHandCursor:!0}).on("pointerup",()=>{this.musicOn=!this.musicOn,n.setTexture(this.musicOn?"toggle":"toggleFlip"),this._fitToggleSize(n),this.game.musicManager&&this.game.musicManager.setMuted(!this.musicOn),U(this.musicOn),localStorage.setItem("musicOn",this.musicOn),x(this,"menuFX")});this.content.add([c,n]),this.musicVol=Z();const h=e-180,f=this.add.image(t/2,a+i/2,"sliderTrack").setOrigin(.5).setDisplaySize(h,12),d=this.add.image(f.x-h/2+h*this.musicVol,f.y,"sliderThumb").setOrigin(.5).setDisplaySize(24,24),l=this.add.circle(d.x,d.y,50,16777215,0).setInteractive({draggable:!0,useHandCursor:!0});return l.on("drag",(o,g)=>{const u=f.x-h/2,m=f.x+h/2,y=Phaser.Math.Clamp(g,u,m);l.x=d.x=y,this.musicVol=(y-u)/(m-u),this.game.musicManager&&this.game.musicManager.setVolume(this.musicVol),K(this.musicVol),localStorage.setItem("musicVol",this.musicVol)}),this.content.add([f,l,d]),a+i+r*3}_sfxSection(t,e,a,i,r){const s=this._txt(t/2,a,"SFX").setOrigin(.5,0);a+=r,this.content.add(s),this.content.add(this.add.image(t/2,a+i/2,"panel_bg").setDisplaySize(e,i)),this.content.add(this.add.image(s.x-s.width/2-30,s.y+s.height/2,"sfxIcon").setOrigin(.5).setDisplaySize(24,24)),this.sfxOn=F();const n=this.add.image(s.x+s.width/2+30,s.y+s.height/2,this.sfxOn?"toggle":"toggleFlip").setOrigin(.5);this._fitToggleSize(n);const c=this.add.circle(n.x,n.y,50,16777215,0).setInteractive({useHandCursor:!0}).on("pointerup",()=>{this.sfxOn=!this.sfxOn,n.setTexture(this.sfxOn?"toggle":"toggleFlip"),this._fitToggleSize(n),T(this.sfxOn),localStorage.setItem("sfxOn",this.sfxOn),this.sfxOn?x(this,"menuFX"):this.sound.sounds.filter(o=>!o.key.startsWith("dd")).forEach(o=>o.stop())});this.content.add([c,n]),this.sfxVol=k();const h=e-180,f=this.add.image(t/2,a+i/2,"sliderTrack").setOrigin(.5).setDisplaySize(h,12),d=this.add.image(f.x-h/2+h*this.sfxVol,f.y,"sliderThumb").setOrigin(.5).setDisplaySize(24,24),l=this.add.circle(d.x,d.y,50,16777215,0).setInteractive({draggable:!0,useHandCursor:!0}).on("drag",(o,g)=>{const u=f.x-h/2,m=f.x+h/2,y=Phaser.Math.Clamp(g,u,m);l.x=d.x=y,this.sfxVol=(y-u)/(m-u),this.sound.sounds.filter(S=>!S.key.startsWith("dd")).forEach(S=>S.setVolume(this.sfxVol)),D(this.sfxVol),localStorage.setItem("sfxVol",this.sfxVol)});return this.content.add([f,l,d]),a+i+r*3}}class et extends Phaser.Scene{constructor(){super("Credits")}preload(){this.load.image("about_bg","assets/about-background.png")}create(){const t=this.scale.width,e=this.scale.height;this.add.image(t/2,e/2,"about_bg").setOrigin(.5).setDisplaySize(t,e),this.add.rectangle(t/2,e/2,t,e,0,.4).setOrigin(.5),this.add.text(t/2,40,"About",{fontSize:"48px",fill:"#ffffff"}).setOrigin(.5,0);const a=[{text:"Produced by Shant Games",style:{fontSize:"28px",fill:"#ffffff"}},{text:"Instagram: @shantgame",style:{fontSize:"24px",fill:"#00acee"}},{text:"If you liked Dragon Dash,",style:{fontSize:"26px",fill:"#ffffff"}},{text:"don't forget to leave a review! ðŸ˜Š",style:{fontSize:"26px",fill:"#ffffff"}},{text:"Contact: contact.shantgame@gmail.com",style:{fontSize:"22px",fill:"#ffffff"}}],i=e*.35,r=40;a.forEach((n,c)=>{this.add.text(t/2,i+c*r,n.text,n.style).setOrigin(.5,.5)});const s=this.add.text(t/2,e-50,"â—€ Back",{fontSize:"32px",fill:"#ffffff",backgroundColor:"#00000066",padding:{x:12,y:5}}).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointerover",()=>s.setStyle({fill:"#ffff00"})).on("pointerout",()=>s.setStyle({fill:"#ffffff"})).on("pointerup",(n,c,h,f)=>{f.stopPropagation(),x(this,"menuFX"),this.time.delayedCall(100,()=>this.scene.start("Menu"))})}}class st{constructor(t){this.game=t,this.scene=null,this.tracks=["dd1","dd2","dd3","dd4"],this.currentIndex=0,this.currentSound=null,this.muted=localStorage.getItem("musicOn")==="false",this.volume=parseFloat(localStorage.getItem("musicVol"))||.5}preloadMusic(){this.scene.load.setPath("./assets"),this.tracks.forEach(t=>this.scene.load.audio(t,`${t}.mp3`))}start(){this.muted||(this.currentIndex=0,this._playCurrent())}_playCurrent(){this.currentSound&&(this.currentSound.stop(),this.currentSound.destroy());const t=this.tracks[this.currentIndex];this.currentSound=this.scene.sound.add(t,{volume:this.volume,loop:!1}),this.currentSound.once("complete",()=>this.next()),this.currentSound.play()}next(){this.currentIndex=(this.currentIndex+1)%this.tracks.length,this.muted||this._playCurrent()}setMuted(t){this.muted=t,localStorage.setItem("musicOn",!t),t?this.currentSound&&this.currentSound.pause():this.currentSound?this.currentSound.resume():this._playCurrent()}setVolume(t){this.volume=t,localStorage.setItem("musicVol",t),this.currentSound&&this.currentSound.setVolume(t)}stop(){this.currentSound&&(this.currentSound.stop(),this.currentSound.destroy(),this.currentSound=null)}togglePause(){this.currentSound&&(this.currentSound.isPaused?this.currentSound.resume():this.currentSound.pause())}getCurrentTrack(){return{key:this.tracks[this.currentIndex],playing:!!(this.currentSound&&this.currentSound.isPlaying),muted:this.muted,volume:this.volume}}destroy(){this.stop()}}let v=null,_=null;window.addEventListener("load",async()=>{v&&v();const p=localStorage.getItem("quality")||"high",t=p==="low",e=p==="high",r={type:Phaser.AUTO,parent:"game-container",width:720,height:1280,pixelArt:t,antialias:!t,roundPixels:t,resolution:e?2:1,backgroundColor:"#000000",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},physics:{default:"arcade",arcade:{gravity:{y:1e3},debug:!1}},scene:[B,X,G,$,q,J,tt,et]},s=new Phaser.Game(r);s.musicManager=new st(s);const n=()=>{try{s.sound?.pauseAll(),s.musicManager&&typeof s.musicManager.pauseAll=="function"&&s.musicManager.pauseAll()}catch(o){console.warn("Audio pause error:",o)}},c=()=>{try{s.sound?.resumeAll(),s.musicManager&&typeof s.musicManager.resumeAll=="function"&&s.musicManager.resumeAll()}catch(o){console.warn("Audio resume error:",o)}},f=typeof window<"u"&&window.Capacitor&&window.Capacitor.getPlatform()!=="web";let d=null;if(f)try{const{AdMob:o}=await E(async()=>{const{AdMob:u}=await import("./index-deRGXZsy.js");return{AdMob:u}},__vite__mapDeps([0,1]));await o.initialize();const g={adId:"ca-app-pub-3940256099942544/6300978111",adSize:"BANNER",position:"BOTTOM_CENTER",margin:0,isTesting:!0};await o.showBanner(g),_=()=>{o.hideBanner().catch(u=>{console.warn("Banner hide error:",u)})},console.log("AdMob banner loaded successfully")}catch(o){console.warn("AdMob initialization error:",o)}if(f)try{const{App:o}=await E(async()=>{const{App:g}=await import("./index-DihluWxr.js");return{App:g}},__vite__mapDeps([2,1]));d=await o.addListener("appStateChange",({isActive:g})=>{g?c():n()})}catch(o){console.warn("Capacitor App not available, falling back to web events:",o),l()}else l();function l(){const o=()=>{document.hidden?n():c()};document.addEventListener("visibilitychange",o),window.addEventListener("blur",n),window.addEventListener("focus",c);const g=()=>{document.removeEventListener("visibilitychange",o),window.removeEventListener("blur",n),window.removeEventListener("focus",c)},u=v;v=()=>{g(),u&&u()}}if(f&&(d||_)){const o=v;v=()=>{_&&(_(),_=null),d&&(d.remove(),d=null),o&&o()}}s.events.once("destroy",()=>{v&&v()})});export{E as _};
